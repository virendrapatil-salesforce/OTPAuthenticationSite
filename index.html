<!DOCTYPE html>
<html>
<head>
  <title>OTP Verification</title>
  <style>
    body { font-family: sans-serif; text-align: center; margin-top: 50px; }
    .hidden { display: none; }
    button, input { padding: 8px; margin-top: 10px; }
  </style>
</head>
<body>

  <div id="otpSection">
    <h2>Enter OTP</h2>
    <input type="text" id="otpInput" placeholder="Enter OTP" maxlength="6" />
    <br/>
    <button onclick="validateOTP()">Submit</button>
    <p id="statusMsg"></p>
  </div>

  <div id="consentSection" class="hidden">
    <h3>Consent Required</h3>
    <p>Do you allow your Relationship Manager to continue the application on your behalf?</p>
    <button onclick="submitConsent()">Yes, I Allow</button>
  </div>

  <div id="finalMessage" class="hidden">
    <h3>Thank you</h3>
    <p>You may now disconnect. RM will continue.</p>
  </div>

  <script>
    const HARDCODED_OTP = "123456";
    const socket = new WebSocket("wss://your-socket-server.com");

    socket.onopen = () => console.log("WebSocket connected");
    socket.onerror = err => console.error("WebSocket error", err);

    function validateOTP() {
      const input = document.getElementById("otpInput").value;
      const status = document.getElementById("statusMsg");

      if (input === HARDCODED_OTP) {
        status.innerText = "✅ OTP Verified";
        document.getElementById("otpSection").classList.add("hidden");
        document.getElementById("consentSection").classList.remove("hidden");
      } else {
        status.innerText = "❌ Invalid OTP";
      }
    }

    function submitConsent() {
      socket.send(JSON.stringify({ type: "CONSENT_GIVEN", user: "customer123" }));

      document.getElementById("consentSection").classList.add("hidden");
      document.getElementById("finalMessage").classList.remove("hidden");
    }
  </script>
</body>
</html>
